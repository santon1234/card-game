import{d as T,r as w,a as V,c as B,w as K,o as a,u as s,b as e,e as l,f as n,g as b,h as f,F as k,i as I,n as i,l as v,t as p,_ as W}from"./index-89f15596.js";import{g as $,_ as A,S as D,a as E}from"./socket-a65bdda2.js";const N={key:0},z={key:2,class:"fixed bottom-50 flex w-full min-w-340 max-w-600 flex-col"},G={class:"w-full text-white"},M={class:"flex flex-col"},O={key:0,class:"flex h-60 w-full min-w-340 max-w-600 border-2 p-2"},R=T({__name:"home",setup(j){const r=w(null),m=w(null),C=$(),c=V({inputValue:"",onFocusInnput:!1}),F=u=>{const o=u.currentTarget;c.inputValue=o.value},g=()=>{e.userId=c.inputValue,v.isLoading=!0,e.socket=new D,e.socket.init(),setTimeout(()=>{x(),v.isLoading=!1},500)},_=()=>{var o;if(!((o=r==null?void 0:r.value)!=null&&o.value))return;const u=r.value;e.socket.emit("send-message",{id:e.userId,chat:u.value,time:E()}),r.value.value="",r.value.focus(),h()},h=()=>{const u=m.value;u.scrollTop=0},x=()=>{r.value.focus(),c.onFocusInnput=!0},L=()=>{r.value.blur(),c.onFocusInnput=!1,h()},S=()=>{c.onFocusInnput?L():x()};return(u,o)=>(a(),B(A,{"custom-style":"flex flex-col flex-wrap items-center gap-40 min-h-screen bg-gray-900"},{default:K(()=>[s(e).userId?f("",!0):(a(),l("div",N,[o[2]||(o[2]=n("p",null,"아이디를 입력해주세요.",-1)),n("input",{type:"text",onInput:F,onKeydown:b(g,["enter"])},null,32),n("button",{onClick:g},"입력")])),s(e).userId?(a(),l("button",{key:1,class:"h-100 w-300 border",onClick:o[0]||(o[0]=()=>u.$router.push("card-game"))}," CARD-GAME ")):f("",!0),s(e).userId?(a(),l("div",z,[n("div",G,[(a(!0),l(k,null,I(s(e).notice,(t,d)=>(a(),l("p",{key:d,class:i([t[0]==="1"?"bg-gray-500/100":"bg-red-400/100","px-10"])},p(t.substring(1)),3))),128))]),n("ul",{ref_key:"refChatWindow",ref:m,class:i([c.onFocusInnput?"h-300 border-2 bg-gray-100/50 opacity-100":"h-100 opacity-50","chat-window cursor-pointer"]),onClick:S},[(a(!0),l(k,null,I(s(e).socket.chatList,(t,d)=>{var y;return a(),l("li",{key:d,class:i(["flex flex-col gap-6",t.id===s(e).userId?"self-end":"flex-row-reverse self-start"])},[d===0||((y=s(e).socket.chatList[d-1])==null?void 0:y.id)!==s(e).socket.chatList[d].id?(a(),l("div",{key:0,class:i(["flex",t.id===s(e).userId?"self-end":"self-start"])},[n("p",{class:i(["my-4 h-fit w-fit rounded-xl px-6",t.id===s(e).userId?"bg-teal-200 pl-20 ":"bg-red-200 pr-20"])},p(t.id)+": ",3)],2)):f("",!0),n("div",M,[n("p",{class:i(["speech-bubble",t.id==s(e).userId?"self-end":"self-start"])},p(t.chat),3),n("p",{class:i(["h-fit w-fit bg-gray-100 px-6 text-2xs text-black",t.id==s(e).userId?"self-end":"self-start"])},p(t.time.substring(0,10)===s(C)?"today "+t.time.substring(11):t.time),3)])],2)}),128))],2),s(e).userId?(a(),l("div",O,[n("input",{ref_key:"refUserInput",ref:r,class:"w-full",type:"text",onFocus:o[1]||(o[1]=t=>c.onFocusInnput=!0),onKeydown:b(_,["enter"])},null,544),n("button",{class:"w-80 hover:bg-teal-900 hover:text-white",onClick:_},"입력")])):f("",!0)])):f("",!0)]),_:1}))}});const J=W(R,[["__scopeId","data-v-880982ed"]]);export{J as default};
