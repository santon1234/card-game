import{d as T,r as w,a as V,c as B,w as K,o as l,u as s,b as e,e as u,f as o,g as y,h as f,F as k,i as I,n as i,l as v,t as p,_ as W}from"./index-53b8f5ef.js";import{g as $,_ as A,S as D,a as E}from"./socket-da478b44.js";const N={key:0},z={key:1,class:"fixed bottom-50 flex w-full min-w-340 max-w-600 flex-col"},G={class:"w-full text-white"},M={class:"flex flex-col"},O={key:0,class:"flex h-60 w-full min-w-340 max-w-600 border-2 p-2"},R=T({__name:"home",setup(j){const a=w(null),m=w(null),C=$(),c=V({inputValue:"",onFocusInnput:!1}),F=r=>{const n=r.currentTarget;c.inputValue=n.value},g=()=>{e.userId=c.inputValue,v.isLoading=!0,e.socket=new D,e.socket.init(),setTimeout(()=>{x(),v.isLoading=!1},500)},_=()=>{var n;if(!((n=a==null?void 0:a.value)!=null&&n.value))return;const r=a.value;e.socket.emit("send-message",{id:e.userId,chat:r.value,time:E()}),a.value.value="",a.value.focus(),h()},h=()=>{const r=m.value;r.scrollTop=0},x=()=>{a.value.focus(),c.onFocusInnput=!0},L=()=>{a.value.blur(),c.onFocusInnput=!1,h()},S=()=>{c.onFocusInnput?L():x()};return(r,n)=>(l(),B(A,{"custom-style":"flex flex-col flex-wrap items-center gap-40 min-h-screen bg-gray-900"},{default:K(()=>[s(e).userId?f("",!0):(l(),u("div",N,[n[2]||(n[2]=o("p",null,"아이디를 입력해주세요.",-1)),o("input",{type:"text",onInput:F,onKeydown:y(g,["enter"])},null,32),o("button",{onClick:g},"입력")])),o("button",{class:"h-100 w-300 border",onClick:n[0]||(n[0]=()=>r.$router.push("card-game"))},"CARD-GAME"),s(e).userId?(l(),u("div",z,[o("div",G,[(l(!0),u(k,null,I(s(e).notice,(t,d)=>(l(),u("p",{key:d,class:i([t[0]==="1"?"bg-gray-500/100":"bg-red-400/100","px-10"])},p(t.substring(1)),3))),128))]),o("ul",{ref_key:"refChatWindow",ref:m,class:i([c.onFocusInnput?"h-300 border-2 bg-gray-100/50 opacity-100":"h-100 opacity-50","chat-window cursor-pointer"]),onClick:S},[(l(!0),u(k,null,I(s(e).socket.chatList,(t,d)=>{var b;return l(),u("li",{key:d,class:i(["flex flex-col gap-6",t.id===s(e).userId?"self-end":"flex-row-reverse self-start"])},[d===0||((b=s(e).socket.chatList[d-1])==null?void 0:b.id)!==s(e).socket.chatList[d].id?(l(),u("div",{key:0,class:i(["flex",t.id===s(e).userId?"self-end":"self-start"])},[o("p",{class:i(["my-4 h-fit w-fit rounded-xl px-6",t.id===s(e).userId?"bg-teal-200 pl-20 ":"bg-red-200 pr-20"])},p(t.id)+": ",3)],2)):f("",!0),o("div",M,[o("p",{class:i(["speech-bubble",t.id==s(e).userId?"self-end":"self-start"])},p(t.chat),3),o("p",{class:i(["h-fit w-fit bg-gray-100 px-6 text-2xs text-black",t.id==s(e).userId?"self-end":"self-start"])},p(t.time.substring(0,10)===s(C)?"today "+t.time.substring(11):t.time),3)])],2)}),128))],2),s(e).userId?(l(),u("div",O,[o("input",{ref_key:"refUserInput",ref:a,class:"w-full",type:"text",onFocus:n[1]||(n[1]=t=>c.onFocusInnput=!0),onKeydown:y(_,["enter"])},null,544),o("button",{class:"w-80 hover:bg-teal-900 hover:text-white",onClick:_},"입력")])):f("",!0)])):f("",!0)]),_:1}))}});const J=W(R,[["__scopeId","data-v-b83c26e0"]]);export{J as default};
